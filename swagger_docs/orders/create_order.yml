tags:
  - Orders
summary: Create a new order
description: Create a new order for tickets with automatic total calculation
parameters:
  - name: order
    in: body
    required: true
    description: Order data to create
    schema:
      type: object
      required:
        - customer_id
        - event_id
        - delivery_option_id
        - tickets
      properties:
        customer_id:
          type: integer
          example: 1
          description: ID of the customer placing the order (required)
        event_id:
          type: integer
          example: 1
          description: ID of the event for which tickets are ordered (required)
        delivery_option_id:
          type: integer
          example: 1
          description: ID of the delivery option (required)
        tickets:
          type: array
          minItems: 1
          items:
            type: object
            required:
              - ticket_type
              - quantity
            properties:
              ticket_type:
                type: string
                example: "Standard"
                description: Type of ticket (Standard, VIP, etc.)
              quantity:
                type: integer
                minimum: 1
                example: 2
                description: Number of tickets of this type
          description: List of tickets to order (required, at least 1)
responses:
  201:
    description: Order created successfully
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Order created successfully"
        order_id:
          type: integer
          example: 123
          description: ID of the newly created order
        order:
          type: object
          properties:
            order_id:
              type: integer
              example: 123
            customer_id:
              type: integer
              example: 1
            event_id:
              type: integer
              example: 1
            order_date:
              type: string
              format: datetime
              example: "2023-01-15T14:30:00"
            total_amount:
              type: number
              format: decimal
              example: 155.00
            delivery_option_id:
              type: integer
              example: 1
            tickets:
              type: array
              items:
                type: object
                properties:
                  ticket_id:
                    type: integer
                    example: 1
                  ticket_type:
                    type: string
                    example: "Standard"
                  price:
                    type: number
                    format: decimal
                    example: 75.00
  400:
    description: Bad request - validation error
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Not enough tickets available for this event"
  404:
    description: Customer, event, or delivery option not found
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Customer with ID 1 not found"
  422:
    description: Unprocessable Entity - invalid data
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Invalid ticket quantity"
  500:
    description: Internal server error
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Database error occurred"